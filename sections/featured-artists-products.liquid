{{ 'featured-artists-products.css' | asset_url | stylesheet_tag }}

<div class="featured-artists-products color-{{ section.settings.color_scheme }}">
  <div class="featured-artists-products__header">
    <div class="featured-artists-products__text">
      <h2>{{ section.settings.artist_name }}</h2>
      <p>
        <strong>{{ section.settings.genre }}</strong>
      </p>
      <p>{{ section.settings.bio }}</p>
    </div>
    {% if section.settings.spotify_url %}
      <a href="{{ section.settings.spotify_url }}" target="_blank" class="featured-artists-products__spotify">
        <img height="100" width="100" src="{{ 'icon-spotify.svg' | asset_url }}" alt="Spotify">
      </a>
    {% endif %}
  </div>

  <div class="featured-artists-products__products color-{{ section.settings.color_scheme_lower }}">
    <h3>Products they love</h3>
    <div class="featured-artists-products__grid">
      {% for block in section.blocks %}
        {% assign product = block.settings.product %}
        {% if product != blank %}
          <div class="featured-artists-products__card">
            <a href="{{ product.url }}">
              <img
                height="100"
                width="100"
                src="{{ product.featured_image | image_url: width: 400 }}"
                alt="{{ product.title }}"
              >
              <div class="featured-artists-products__info">
                <p class="featured-artists-products__name">{{ product.title }}</p>
                <p class="featured-artists-products__price">{{ product.price | money }}</p>
                {% if block.settings.in_store %}
                  <span class="featured-artists-products__badge">In-store</span>
                {% endif %}
              </div>
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Featured Artist Products",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "text",
      "id": "artist_name",
      "label": "Artist Name",
      "default": "Artist Name"
    },
    {
      "type": "text",
      "id": "genre",
      "label": "Genre",
      "default": "Genre"
    },
    {
      "type": "textarea",
      "id": "bio",
      "label": "Artist Bio",
      "default": "Bio - Lorem ipsum dolor sit amet consectetur..."
    },
    {
      "type": "url",
      "id": "spotify_url",
      "label": "Spotify URL"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme_lower",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "Select product"
        },
        {
          "type": "text",
          "id": "product_price",
          "label": "Product Price",
          "default": "Â£239"
        },
        {
          "type": "checkbox",
          "id": "in_store",
          "label": "In-store Badge",
          "default": true
        }
      ]
    }
  ],
  "max_blocks": 8,
  "presets": [
    {
      "name": "Featured Artist Products",
      "category": "Custom"
    }
  ]
}
{% endschema %}
